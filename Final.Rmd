---
title: "R_Proj_Final"
author: "Joselyn Rodriguez"
date: "4/23/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(gganimate)
library(gifski)
library(png)
library(ggrepel)
library(scales)
library(gapminder)
library(data.table)
```

```{r import-data}
# note file name 
path_US_Death <- "./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"
path_US_confirmed <- "./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"
path_int_Death <- "./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv"
path_int_confirmed <- "./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv"

deaths <- read.csv(path_US_Death) #Reads in Deaths Over Time csv
deaths_int <- read.csv(path_int_Death)
cases <- read.csv(path_US_confirmed) #Reads in Cases Over Time csv
cases_int <- read.csv(path_int_confirmed)
```

```{r pre-processing}
cases = cases %>% select("Province_State" | starts_with("X"))
cases_int = cases_int %>% select("Country.Region" | starts_with("X"))

deaths = deaths %>% select("Province_State" | starts_with("X"))
deaths_int = deaths_int %>% select("Country.Region" | starts_with("X"))

cases = cases %>% group_by(Province_State) %>% summarise(across(starts_with("X"), sum))
cases_int = cases_int %>% group_by(Country.Region) %>% summarise(across(starts_with("X"), sum))

deaths = deaths %>% group_by(Province_State) %>% summarise(across(starts_with("X"), sum))
deaths_int = deaths_int %>% group_by(Country.Region) %>% summarise(across(starts_with("X"), sum))

setDT(cases)
setDT(cases_int)
cases = cases %>% melt(cases, id=c("Province_State"), measure=patterns("^X"), value.name="Cases", variable.name="Date")
cases_int = cases_int %>% melt(cases_int, id=c("Country.Region"), measure=patterns("^X"), value.name ="Cases", variable.name="Date")


setDT(deaths)
setDT(deaths_int)
deaths = deaths %>% melt(deaths, id=c("Province_State"), measure=patterns("^X"), value.name="Deaths", variable.name="Date")
deaths_int = deaths_int %>% melt(deaths_int, id=c("Country.Region"), measure=patterns("^X"), value.name="Deaths", variable.name="Date")

cases$Date = as.Date(cases$Date, format="X%m.%d.%y")
cases_int$Date = as.Date(cases_int$Date, format="X%m.%d.%y")

deaths$Date = as.Date(deaths$Date, format="X%m.%d.%y")
deaths_int$Date = as.Date(deaths_int$Date, format="X%m.%d.%y")

covid_US <- merge(cases, deaths, by=c("Province_State", "Date"))
covid_int <- merge(cases_int, deaths_int, by = c("Country.Region", "Date"))
```



### Introduction

COVID-19 is a coronavirus that was first identified in Wuhan, China in December of 2019. Since it's first appearance, it has rapidly spread across the world causing a global pandemic that has now lasted for over three years. Since it first appeared, countries began enforcing regulations such as social distancing and mask wearing in order to curb the spread of the virus. Most importantly, a vaccine was rapidly developed and distributed within the year after the first cases. Soon after development, the vaccine was administered to civilians across the world. While this was a great step forward, due to global imbalances of power, early distribution of vaccines was limited to those richest countries. Additionally, while the original variant had shown promise of dying down, new, more contagious variants are continuously threatening the promise of an end to the pandemic. While the end of the pandemic-era of COVID-19 seems to be close in our future, its effects are ever present and will likely be a part of our lives in the long-term. In order to better understand the behavior of the virus and it's impact around the world, we will be exploring how the virus spread throughout different countries before and after release of the vaccine. This information is useful in determining the role vaccine distribution has had on the impact of COVID-19 across the world.


### Analyses

```{r plot-1}
theme_set(theme_bw())

cases_int_plt_1a = ggplot(covid_int, #The dataframe we are using to create the plot
                    aes(x=Date,y=Cases, color = covid_int$Country.Region)) + #The x and y variables
  geom_point(show.legend = F, size = 0.1) + #What each point looks like
  labs(x="Date", #Label of X Axis
       y="Cases", #Label of Y Axis
       title=paste("COVID Cases Worldwide Over Time")) #Title
plot(cases_int_plt_1a)
```

Looking at the number of cases of COVID world-wide, we can see that there were several situations in which the virus platued before increasing rapidly again. The virus can thus be seen to be increasing in a step-wise fashion. 


```{r}
cases_int_plt_1b = ggplot(covid_int, #The dataframe we are using to create the plot
                    aes(x=Deaths,y=Cases, color = covid_int$Country.Region)) + #The x and y variables
  geom_point(show.legend = F, size = 0.1) + #What each point looks like
  labs(x="Date", #Label of X Axis
       y="Cases", #Label of Y Axis
       title=paste("COVID Cases Worldwide Over Time")) #Title
plot(cases_int_plt_1b)
```



```{r plot-2}
cases_int_plt_2 = ggplot(covid_int, 
                     aes(x=Date,y=Deaths)) +
  geom_point(show.legend = FALSE, size = .1, aes(color = covid_int$Country.Region)) + 
  labs(x="Date",
       y="Deaths",
       title=paste("COVID Deaths Worldwide Over Time"))
plot(cases_int_plt_2)
```

```{r}
total_deaths_US = ggplot(covid_US, 
                  aes(x=Province_State, y=Deaths)) +
                  geom_point(show.legend = FALSE, size = .1, aes(label.fontsize = 8)) + 
                  labs(x="State",
                       y="Deaths",
                  title=paste("Total COVID Deaths by State")) +
                  theme(axis.text.x = element_text(angle = 90)) 
plot(total_deaths_US)
```


### Conclusion